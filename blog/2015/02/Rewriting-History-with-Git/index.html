<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<link href='http://www.dpaxinos.com/feed.xml' rel='alternate' type='application/atom+xml'>

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <!-- <link href='http://fonts.googleapis.com/css?family=Fjalla+One|Cuprum:400,400italic|Maven+Pro' rel='stylesheet' type='text/css'> -->
<link href='http://fonts.googleapis.com/css?family=Lekton|Cabin|Yanone+Kaffeesatz:300|Oxygen|Fjalla+One|Cuprum:400,400italic|Maven+Pro|Arapey|Homenaje|Orbitron:900' rel='stylesheet' type='text/css'>
  <!--   <link href='http://fonts.googleapis.com/css?family=Abel|PT+Sans+Narrow:400,700|Quicksand|Lobster|Tangerine|Fjalla+One|Inconsolata:400,700|Yanone+Kaffeesatz|Pacifico|Oswald:300|Orbitron:900' rel='stylesheet' type='text/css'> -->
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Rewriting history with Git &middot; Dimitris Paxinos
    
  </title> 
  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/site.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png"> 
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54447083-1', 'auto');
  ga('send', 'pageview');

</script>
  <!-- <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'dimitrispaxinosblog'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script> -->
<body>
    <div class="container content">
        <div class="masthead">
            <h3 class="masthead-title">
                <a href="/" title="Home">Dimitris Paxinos</a>
                 <!-- <small>.NET and other programming stories</small>  -->
                <ul class="menu">
                    
                    &nbsp;&nbsp;&nbsp;
                    <li><a href="/aboutme.html">About</a></li>
                    
                    &nbsp;&nbsp;&nbsp;
                    <li><a href="/archive.html">Archive</a></li>
                    
                    &nbsp;&nbsp;&nbsp;
                    <li><a href="/tags.html">Tags</a></li>
                    
                    &nbsp;&nbsp;&nbsp;
                    <li><a href="/feed.xml">Rss</a></li>
                    
                    <ul>
            </h3>
			<h3 class="masthead-title">			
			<small>.NET and other programming stories</small> 
			</h3>
        </div>

        <div class="post">
  <h1 class="post-title">Rewriting history with Git</h1>
  <span class="post-date">February 08, 2015</span>
  
  <ul class="tags">
   
	<li><a href="/tags/Git" class="tag" title="View posts tagged with &quot;Git&quot;">Git</a></li>  
     
	<li><a href="/tags/Version Control" class="tag" title="View posts tagged with &quot;Version Control&quot;">Version Control</a></li>  
     
	<li><a href="/tags/Productivity" class="tag" title="View posts tagged with &quot;Productivity&quot;">Productivity</a></li>  
     
	<li><a href="/tags/Rebase" class="tag" title="View posts tagged with &quot;Rebase&quot;">Rebase</a></li>  
     
	<li><a href="/tags/Merge" class="tag" title="View posts tagged with &quot;Merge&quot;">Merge</a></li>  
     
	<li><a href="/tags/Squash" class="tag" title="View posts tagged with &quot;Squash&quot;">Squash</a></li>  
   
  </ul>  
  <p>
  <p>How many times have you wished you couldâ€¦</p>

<ul>
<li>Change or add something in the code you just committed? </li>
<li>Merge small commits in your project history?</li>
<li>Keep all commits of a feature branch when transferring your code changes to the main branch?</li>
</ul>

<p>Well, with Git, all the above is actually possible. Git has been around for a while and there is enough online information regarding its main advantages over centralized version control systems (CVCS). I would like to focus on three not-so-well advertised features that I consider real game changers. </p>

<hr>

<p><strong>Caution: You should never try to rewrite any public history. The following Git functionalities are only meant to be used with your local commits and not any commits already pushed to the central repository.</strong></p>

<hr>

<h3>A Git Workflow in an agile environment</h3>

<p>Before proceeding to these cool Git features, let&#39;s talk about a possible Git workflow first. On agile software development projects, work is organized in user stories which define the features to be developed. Since branching in Git is very easy and cheap, one approach would be to have one master/dev branch and create further branches for every user story/feature. This has the benefit of each feature being separately developed without interfering with any others. When the feature is ready, it gets integrated into the main branch.</p>

<h3>Modify your last commit with Git amend</h3>

<p>I do not know about you but this keeps happening to me quite often; realizing, shortly after committing, that there is something I would like to change in my commit. With Git, all we have to do is make our changes and just type:</p>
<div class="highlight"><pre><code class="language-" data-lang="">git commit --amend 
</code></pre></div>
<p>This way, we include the new changes in our most recent commit while keeping the original commit message. In case we also want to change the message we just type:</p>
<div class="highlight"><pre><code class="language-" data-lang="">git commit --amend -m "New commit message"
</code></pre></div>
<h3>Squashing your commits with interactive rebase</h3>

<p>Generally, being able to commit any intermediate changes made before completing a task is very useful, especially when trying different approaches in order to solve a problem. This can also be done using a CVCS, but the project history ends up including many small or meaningless commits. </p>

<p>This can be easily solved with Git and its <em>interactive rebase</em>  feature which gives us the opportunity to reorganize the existing commits by squashing different consequent commits into a single one. This results in having a neat project history, with most of our changes grouped together. Such an approach would also allow for much easier code reviews since the code is organized in logical units-commits.  </p>

<h4>Interactive Rebase Example</h4>

<p>Let&#39;s go through a simple example. Imagine having a branch with four commits. In our example, we would like to squash the fourth into the third commit.</p>

<p><img src="https://raw.githubusercontent.com/dimitrispaxinos/dimitrispaxinos.github.io/master/_assets/images/GitSquash1.png" alt="Squash"></p>

<p>In order to be able to edit the last three commits, we type:</p>
<div class="highlight"><pre><code class="language-" data-lang="">git rebase -i head~3
</code></pre></div>
<p>and then we are asked to choose the commits to be squashed:</p>

<p><img src="https://raw.githubusercontent.com/dimitrispaxinos/dimitrispaxinos.github.io/master/_assets/images/GitSquash2.png" alt="Squash"></p>

<p>We replace &quot;pick&quot; with &quot;squash&quot; for the fourth commit:</p>

<p><img src="https://raw.githubusercontent.com/dimitrispaxinos/dimitrispaxinos.github.io/master/_assets/images/GitSquash3.png" alt="Squash"></p>

<p>In order to save the changes and exit the VI editor, we escape and type <code>:wq</code>.  After this step, we also have the opportunity to modify our commit messages:</p>

<p><img src="https://raw.githubusercontent.com/dimitrispaxinos/dimitrispaxinos.github.io/master/_assets/images/GitSquash4.png" alt="Squash"></p>

<p>After replacing the message of the third commit (the fourth one will be included in the third commit), the squash takes place as expected and our branch history finally looks like this:</p>

<p><img src="https://raw.githubusercontent.com/dimitrispaxinos/dimitrispaxinos.github.io/master/_assets/images/GitSquash5.png" alt="Squash"></p>

<h3>Rebase instead of merge</h3>

<p>Imagine creating a new branch in order to start working on a new feature according to the Git workflow we talked about earlier. While working on your secondary branch, there are some changes made on the master branch by other members of our team.</p>

<p><img src="https://raw.githubusercontent.com/dimitrispaxinos/dimitrispaxinos.github.io/master/_assets/images/GitTwoBranches.PNG" alt="StyleCop Settings"></p>

<p>After finishing our feature, we want to transfer the changes from the secondary to the master branch. The obvious choice would normally be to merge the changes. This would create a new single commit on our master branch with the changes of the secondary branch.</p>

<p><img src="https://raw.githubusercontent.com/dimitrispaxinos/dimitrispaxinos.github.io/master/_assets/images/GitMerge.png" alt="StyleCop Settings"></p>

<p>But what if we could directly transfer our neat commits (that we could also clean up using interactive rebase as described above) to your main branch? Git can do that by rebasing instead of merging. Rebasing actually means reapplying the commits of the secondary branch on your master branch starting after the last commit on the master branch.</p>

<p><img src="https://raw.githubusercontent.com/dimitrispaxinos/dimitrispaxinos.github.io/master/_assets/images/GitRebase.png" alt="StyleCop Settings"></p>

<p>This option can contribute to keeping a very clean project history while retaining all steps towards developing your new feature. </p>

<h4>Rebase Example</h4>

<p>Let&#39;s now have a look at an example to make it more clear. We will continue working on the example we started a while ago for showing the interactive rebase feature. We were working on the master branch and now, we will create one more branch for a feature </p>
<div class="highlight"><pre><code class="language-" data-lang="">git branch featureBranch
git checkout featureBranch
</code></pre></div>
<p>where we will do two more commits. The history would then look like this:</p>

<p><img src="https://raw.githubusercontent.com/dimitrispaxinos/dimitrispaxinos.github.io/master/_assets/images/GitRebaseCmd1.png" alt="Rebase"></p>

<p>If we now return to our master branch </p>
<div class="highlight"><pre><code class="language-" data-lang="">git checkout master
</code></pre></div>
<p>and do another two commits there as well, its history will look like this:</p>

<p><img src="https://raw.githubusercontent.com/dimitrispaxinos/dimitrispaxinos.github.io/master/_assets/images/GitRebaseCmd2.png" alt="Rebase"></p>

<p>We will transfer our changes from our feature branch now by reapplying the commits one by one on top of our last commit on the master branch.</p>
<div class="highlight"><pre><code class="language-" data-lang="">git rebase featureBranch
</code></pre></div>
<p>After rebasing, the history of the master branch will be looking like this:</p>

<p><img src="https://raw.githubusercontent.com/dimitrispaxinos/dimitrispaxinos.github.io/master/_assets/images/GitRebaseCmd4.png" alt="Rebase"></p>
  
</div>
  <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'dimitrispaxinosblog'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
<!-- <div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h4>
          <a href="//blog/2015/11/Centralized-and-Structured-Logging-With-Serilog-and-Seq-Part1">
            Centralized & Structured .NET Logging with Serilog & Seq Part 1
            <small>November 01, 2015</small>
          </a>
        </h4>
      </li>
    
      <li>
        <h4>
          <a href="//blog/2015/08/Dont-Make-Me-Think-Book-Review">
            Book Review - Don't make me think
            <small>August 30, 2015</small>
          </a>
        </h4>
      </li>
    
      <li>
        <h4>
          <a href="//blog/2015/08/Soft-Skills-matter">
            Soft skills matter
            <small>August 26, 2015</small>
          </a>
        </h4>
      </li>
    
  </ul>
</div> -->


        <div class="footer">
            <p>
                &copy; Dimitris Paxinos 2015. All rights reserved.
            </p>
        </div>
    </div>
	<script id="dsq-count-scr" src="//dimitrispaxinosblog.disqus.com/count.js" async></script>
</body>
</html>

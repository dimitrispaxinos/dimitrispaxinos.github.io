<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<link href='http://www.dpaxinos.com/feed.xml' rel='alternate' type='application/atom+xml'>

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <!-- <link href='http://fonts.googleapis.com/css?family=Fjalla+One|Cuprum:400,400italic|Maven+Pro' rel='stylesheet' type='text/css'> -->
<link href='http://fonts.googleapis.com/css?family=Lekton|Cabin|Yanone+Kaffeesatz:300|Oxygen|Fjalla+One|Cuprum:400,400italic|Maven+Pro|Arapey|Homenaje|Orbitron:900' rel='stylesheet' type='text/css'>
  <!--   <link href='http://fonts.googleapis.com/css?family=Abel|PT+Sans+Narrow:400,700|Quicksand|Lobster|Tangerine|Fjalla+One|Inconsolata:400,700|Yanone+Kaffeesatz|Pacifico|Oswald:300|Orbitron:900' rel='stylesheet' type='text/css'> -->
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Centralized & Structured .NET Logging with Serilog & Seq Part 1 &middot; Dimitris Paxinos
    
  </title> 
  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/site.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png"> 
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54447083-1', 'auto');
  ga('send', 'pageview');

</script>
  <!-- <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'dimitrispaxinosblog'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script> -->
<body>
    <div class="container content">
        <div class="masthead">
            <h3 class="masthead-title">
                <a href="/" title="Home">Dimitris Paxinos</a>
                 <!-- <small>.NET and other programming stories</small>  -->
                <ul class="menu">
                    
                    &nbsp;&nbsp;&nbsp;
                    <li><a href="/aboutme.html">About</a></li>
                    
                    &nbsp;&nbsp;&nbsp;
                    <li><a href="/archive.html">Archive</a></li>
                    
                    &nbsp;&nbsp;&nbsp;
                    <li><a href="/tags.html">Tags</a></li>
                    
                    &nbsp;&nbsp;&nbsp;
                    <li><a href="/feed.xml">Rss</a></li>
                    
                    <ul>
            </h3>
			<h3 class="masthead-title">			
			<small>.NET and other programming stories</small> 
			</h3>
        </div>

        <div class="post">
  <h1 class="post-title">Centralized & Structured .NET Logging with Serilog & Seq Part 1</h1>
  <span class="post-date">November 01, 2015</span>
  
  <ul class="tags">
   
	<li><a href="/tags/.NET" class="tag" title="View posts tagged with &quot;.NET&quot;">.NET</a></li>  
     
	<li><a href="/tags/serilog" class="tag" title="View posts tagged with &quot;serilog&quot;">serilog</a></li>  
     
	<li><a href="/tags/seq" class="tag" title="View posts tagged with &quot;seq&quot;">seq</a></li>  
     
	<li><a href="/tags/logging" class="tag" title="View posts tagged with &quot;logging&quot;">logging</a></li>  
     
	<li><a href="/tags/monitoring" class="tag" title="View posts tagged with &quot;monitoring&quot;">monitoring</a></li>  
   
  </ul>  
  <p>
  <h2>TL;DR</h2>

<p>Serilog and Seq are two open-source tools that can help you introduce a centralized and structured logging mechanism in your .NET application really quickly. Has a quick learning curve and can substantially improve your logging, monitoring and error reporting workflow.</p>

<h2>The Problem</h2>

<p>The traditional approach of plain-text file based logging has some very important drawbacks. Log files have to be physically retrieved first and their contents have to subsequently be parsed into a structured form so that we can draw some useful conclusions. </p>

<p>Retrieving the log file when dealing with a web application is not that hard you might say. What happens if you have a client-server application? How are you going to get the client log files? </p>

<p>In the enterprise world, where LOB applications run in the intranet, the helpdesk could remotely connect to the computer where the client is running and retrieve the log file. But still... this could be better... </p>

<h2>Serilog &amp; Seq for the win</h2>

<p>In this blog post, we are going to start examining a different logging approach which offers:</p>

<blockquote>
<ul>
<li> Structured meaningful logging objects</li>
<li>A central repository for collecting these logs </li>
<li>A neat web interface with a queryable log list</li>
</ul>
</blockquote>

<p>using two open-source tools, Serilog and Seq. The goal is to get from reading to trying it out very fast. </p>

<h3>What is Serilog?</h3>

<p><a href="http://serilog.net/">Serilog</a> is a logging .NET library like Log4Net which:</p>

<ul>
<li>Logs structured event data. (complete JSON objects) </li>
<li>Has a very clean and straightforward syntax. </li>
<li>Can write the logs to many different places (the so-called <a href="https://github.com/serilog/serilog/wiki/Provided-Sinks">Sinks</a>) like files, the console, DBs etc.</li>
</ul>

<h3>What is Seq?</h3>

<p><a href="http://getseq.net/">Seq</a> is a complete solution for storing, displaying and querying structured event data which:</p>

<ul>
<li>Can be installed in a matter of minutes</li>
<li>Works out of the box with Serilog</li>
<li>Has an API for the logs to be submitted</li>
<li>Has a web interface with a queryable log list</li>
<li>Has some other cool features like retention and event triggers.</li>
</ul>

<h2>Let&#39;s try it out!</h2>

<h3>Installing Seq</h3>

<ol>
<li>Get Seq from <a href="http://getseq.net/Download">here</a> and do a default install </li>
<li>You can now access the web interface here: <a href="http://localhost:5341/#/events">http://localhost:5341/#/events</a></li>
</ol>

<h3>Serilog Basics</h3>

<p>Fire up Visual Studio, create a console application and...</p>

<h4>NuGet packages</h4>

<p>Add the following two NuGet packages:</p>

<ul>
<li>Serilog</li>
<li>Serilog.Sinks.Seq</li>
</ul>

<h4>Create Logger</h4>

<p>It is amazingly easy to create a logger that would write to our Seq server:
<script src="https://gist.github.com/dimitrispaxinos/f34abc870cf39a27e5de.js"></script></p>

<h4>Publish a log event - Log Event Levels</h4>

<p>Publishing a log is as easy as using one line of code. You can use any of the following logging levels:
<script src="https://gist.github.com/dimitrispaxinos/b3571ae6f3f6b48156c9.js"></script></p>

<p>And this is what you would see on the Seq web interface:</p>

<p><img src="https://raw.githubusercontent.com/dimitrispaxinos/dimitrispaxinos.github.io/master/_assets/images/CentralizedStructuredLogging/SeqScreenShot_2.png" alt=""></p>

<h4>Attaching Parameters</h4>

<p>Let&#39;s now attach some parameters to our log event and make it a bit more meaningful:
<script src="https://gist.github.com/dimitrispaxinos/ed1b50385e3b71ec6d8d.js"></script></p>

<p>The two parameters will be included in the logging event object as two additional properties with property names as declared in the log event string, <code>{FirstName}</code> and <code>{LastName}</code>:</p>

<p><img src="https://raw.githubusercontent.com/dimitrispaxinos/dimitrispaxinos.github.io/master/_assets/images/CentralizedStructuredLogging/SeqScreenShot_3.png" alt=""></p>

<h4>Attaching Structured Objects</h4>

<p>As said earlier, one of the strengths of Serilog is its ability to serialize and attach complete structured objects in its log event:
<script src="https://gist.github.com/dimitrispaxinos/7e0c9389e98a845b9938.js"></script></p>

<p>As you can see below, you have to prefix your property name with &#39;@&#39; in order to be automatically serialized by Serilog:</p>

<p><img src="https://raw.githubusercontent.com/dimitrispaxinos/dimitrispaxinos.github.io/master/_assets/images/CentralizedStructuredLogging/SeqScreenShot_4.png" alt=""></p>

<h4>Attaching an Exception</h4>

<p>Since we can attach stuctured objects, exceptions can also be attached:
<script src="https://gist.github.com/dimitrispaxinos/ba50c81dae503f17b905.js"></script></p>

<p>and also highlighted in red within Seq:</p>

<p><img src="https://raw.githubusercontent.com/dimitrispaxinos/dimitrispaxinos.github.io/master/_assets/images/CentralizedStructuredLogging/SeqScreenShot_5.PNG" alt=""></p>

<h3>Summing-up Part 1</h3>

<p>In this first part, we went through the basics of using Serilog and Seq. The goal was to get you quickly up and running so that you can try it out yourself.  In Part 2, we will go through the contextual logging capabilities of Serilog, always in conjunction with Seq.</p>
  
</div>
  <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'dimitrispaxinosblog'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
<!-- <div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h4>
          <a href="//blog/2015/08/Dont-Make-Me-Think-Book-Review">
            Book Review - Don't make me think
            <small>August 30, 2015</small>
          </a>
        </h4>
      </li>
    
      <li>
        <h4>
          <a href="//blog/2015/08/Soft-Skills-matter">
            Soft skills matter
            <small>August 26, 2015</small>
          </a>
        </h4>
      </li>
    
      <li>
        <h4>
          <a href="//blog/2015/08/Binding-an-Enum-to-an-ItemsSource">
            Binding an ItemsSource to an Enum
            <small>August 18, 2015</small>
          </a>
        </h4>
      </li>
    
  </ul>
</div> -->


        <div class="footer">
            <p>
                &copy; Dimitris Paxinos 2015. All rights reserved.
            </p>
        </div>
    </div>
	<script id="dsq-count-scr" src="//dimitrispaxinosblog.disqus.com/count.js" async></script>
</body>
</html>
